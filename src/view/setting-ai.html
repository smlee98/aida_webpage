<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gridone - AI Portal</title>

    <link rel="stylesheet" href="assets/style/master.css">
</head>
<body>
    <main>     
        <section id="main">
            @gridone-include('../include/sidebar.html')
            <div class="content">
                @gridone-include('../include/nav.html')
                <div class="content-wrapper">
                    <div id="main-card" class="mb-4">
                        <div class="row row-cols-2 row-cols-md-3 row-cols-lg-6 h-100 g-4">
                            <div class="col">
                                <div class="card">
                                    <div class="card-body">
                                        <span class="card-icon">
                                            <i class="bi bi-stack fs-5"></i>
                                        </span>
                                        <h6 class="card-title opacity-50 mt-3 fw-bold mb-0">총 서비스 개수</h6>
                                        <h4 class="d-flex justify-content-end fw-bold mb-0">99개</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card">
                                    <div class="card-body">
                                        <span class="card-icon">
                                            <i class="bi bi-check-lg fs-5"></i>
                                        </span>
                                        <h6 class="card-title opacity-50 mt-3 fw-bold mb-0">정상 서비스</h6>
                                        <h4 class="d-flex justify-content-end fw-bold mb-0">99개</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card">
                                    <div class="card-body">
                                        <span class="card-icon">
                                            <i class="bi bi-exclamation-lg fs-5"></i>
                                        </span>
                                        <h6 class="card-title opacity-50 mt-3 fw-bold mb-0">비정상 서비스</h6>
                                        <h4 class="d-flex justify-content-end fw-bold mb-0">0개</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card">
                                    <div class="card-body">
                                        <span class="card-icon">
                                            <i class="bi bi-trash fs-5"></i>
                                        </span>
                                        <h6 class="card-title opacity-50 mt-3 fw-bold mb-0">폐기 서비스</h6>
                                        <h4 class="d-flex justify-content-end fw-bold mb-0">0개</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card">
                                    <div class="card-body">
                                        <span class="card-icon">
                                            <i class="bi bi-file-earmark-code fs-5"></i>
                                        </span>
                                        <h6 class="card-title opacity-50 mt-3 fw-bold mb-0">개발 중 서비스</h6>
                                        <h4 class="d-flex justify-content-end fw-bold mb-0">0개</h4>
                                    </div>
                                </div>
                            </div>
                            <div class="col">
                                <div class="card">
                                    <div class="card-body">
                                        <span class="card-icon">
                                            <i class="bi bi-cloud-arrow-up fs-5"></i>
                                        </span>
                                        <h6 class="card-title opacity-50 mt-3 fw-bold mb-0">운영 중 서비스</h6>
                                        <h4 class="d-flex justify-content-end fw-bold mb-0">0개</h4>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div id="sub-card" class="bg-white p-4 flex-grow-1">
                        <div class="row g-0">
                            <div class="col-12 col-lg-8 mb-4 mb-lg-0 overflow-auto">
                                <table class="table table-custom table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th scope="col">Instance</th>
                                            <th scope="col">State</th>
                                            <th scope="col">Deploy</th>
                                            <th scope="col">Update State</th>
                                            <th scope="col">ProCPU</th>
                                            <th scope="col">SysCPU</th>
                                            <th scope="col">HMemory</th>
                                            <th scope="col">NHMemory</th>
                                            <th scope="col">Disk</th>
                                            <th scope="col">Thread</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                            <div class="col-12 col-lg-4 overflow-auto ps-0 ps-lg-4">
                                <table class="table table-custom table-hover mb-0">
                                    <thead>
                                        <tr>
                                            <th scope="col">Instance</th>
                                            <th scope="col">State</th>
                                            <th scope="col">End</th>
                                            <th scope="col">Regist</th>
                                        </tr>
                                    </thead>
                                    <tbody>
                                        <tr>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                            <td>-</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
                @gridone-include('../include/mobile-bar.html')
            </div>
        </section>
        @gridone-include('../include/modal.html')
    </main>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="assets/script/bootstrap.bundle.js"></script>
    <script src="assets/script/common.min.js"></script>
    <script>
        $(function () {
            const mainSection = document.getElementById("main");
            const toggleBar = document.getElementById("toggle-bar");

            toggleBar.addEventListener('click', function () {
                if(!mainSection.classList.contains('active')){
                    mainSection.classList.add("active");
                } else {
                    mainSection.classList.remove("active");
                }
            });

            const deleteBar = $("div.progress-delete");
            const activeBar = $("div.progress-active");
            const deactiveBar = $("div.progress-deactive");
            const adminBar = $("div.progress-admin");
            const userBar = $("div.progress-user");

            const deleteNum = parseInt($("div.progress-delete span.progress-num").html());
            const activeNum = parseInt($("div.progress-active span.progress-num").html());
            const deactiveNum = parseInt($("div.progress-deactive span.progress-num").html());
            const adminNum = parseInt($("div.progress-admin span.progress-num").html());
            const userNum = parseInt($("div.progress-user span.progress-num").html());

            const allUsers = deleteNum + activeNum + deactiveNum;

            // console.log(`${deleteNum},${activeNum},${deactiveNum}`);

            deleteBar.css("width", Math.ceil((deleteNum / allUsers) * 100) + "%");
            activeBar.css("width", Math.ceil((activeNum / allUsers) * 100) + "%");
            deactiveBar.css("width", Math.ceil((deactiveNum / allUsers) * 100) + "%");
            adminBar.css("width", Math.ceil((adminNum / allUsers) * 100) + "%");
            userBar.css("width", Math.ceil((userNum / allUsers) * 100) + "%");

            const fullDate = document.querySelector("#dates");

            function getDate() {
                const date = new Date();

                let years = date.getFullYear();
                let months = String(date.getMonth()).padStart(2, "0");
                let dates = String(date.getDate()).padStart(2, "0");

                fullDate.innerText = `${years}년 ${months}월 ${dates}일`;
            }

            getDate();
            setInterval(getDate, 300000);
        });
    </script>
    <script>
        // 전체 가입 현황 그래프
        const labels = [
            '1월',
            '2월',
            '3월',
            '4월',
            '5월',
            '6월',
            '7월',
            '8월',
            '9월',
            '10월',
            '11월',
            '12월'
        ];

        const data = {
            labels: labels,
            datasets: [{
                label: '가입 수',
                backgroundColor: 'rgb(255, 99, 132)',
                borderColor: 'rgb(255, 99, 132)',
                data: [8, 5, 3, 0, 0, 0, 0, 0, 0, 0, 0, 0],
            }]
        };

        const config = {
            type: 'bar',
            data: data,
            options: {
                plugins: {
                    legend: {
                        display: false
                    }
                },
                responsive: true,
                maintainAspectRatio: false,
            }
        };

        const myChart = new Chart(
            document.getElementById('myChart'),
            config
        );
    </script>
    <script>
        const boardLabels = [
                'AI 스토리',
                '공지사항',
                '질문과 답변'
            ];

            const boardData = {
                labels: boardLabels,
                datasets: [{
                    data: [8, 5, 3],
                    backgroundColor: [
                        'rgb(220, 53, 69)',
                        'rgb(0, 123, 255)',
                        'rgb(255, 193, 7)'
                    ]
                }],
            };

            const boardConfig = {
                type: 'doughnut',
                data: boardData,
                options: {
                    plugins: {
                        legend: {
                            display: false
                        }
                    },
                    responsive: true,
                    maintainAspectRatio: false,
                }
            };

            const boardChart = new Chart(
                document.getElementById('boardChart'),
                boardConfig
            );
    </script>
    <script>
        let dateDropdown = document.getElementById('yearpicker');

        let currentYear = new Date().getFullYear();
        let earliestYear = 2000;

        while (currentYear >= earliestYear) {
            let dateOption = document.createElement('option');
            dateOption.text = currentYear;
            dateOption.value = currentYear;
            dateDropdown.add(dateOption);
            currentYear -= 1;
        }
    </script>
    <script>
        document.getElementsByName("sidebar-dashboard")[0].classList.add("active");
        document.getElementsByName("mbar-dashboard")[0].classList.add("active");
        document.getElementById("setting-ai").classList.add("active");
        document.getElementById("page-title").innerHTML = "AI 서비스 관리";
    </script>
</body>
</html>